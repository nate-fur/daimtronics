\hypertarget{hall__sensor_8cpp}{}\section{daimtronics/teensy\+\_\+chibios/src/main/hall\+\_\+sensor.cpp File Reference}
\label{hall__sensor_8cpp}\index{daimtronics/teensy\+\_\+chibios/src/main/hall\+\_\+sensor.\+cpp@{daimtronics/teensy\+\_\+chibios/src/main/hall\+\_\+sensor.\+cpp}}
{\ttfamily \#include \char`\"{}include/hall\+\_\+sensor.\+h\char`\"{}}\\*
{\ttfamily \#include $<$Arduino.\+h$>$}\\*
{\ttfamily \#include $<$Ch\+Rt.\+h$>$}\\*
Include dependency graph for hall\+\_\+sensor.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=330pt]{hall__sensor_8cpp__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int16\+\_\+t \hyperlink{hall__sensor_8cpp_ac5350eff4f7be4591be4804922422dea}{hall\+\_\+sensor\+\_\+loop\+\_\+fn} (short Phase\+B\+\_\+pin, short Phase\+C\+\_\+pin)
\begin{DoxyCompactList}\small\item\em This is the primary function controlling the wheel speed sensor. It reads a Hall sensor that is built into the Tekin R8 Motor. This is a three phased motor (PhaseA, PhaseB, PhaseC). Each phase is offset 120 degrees from each other. Ticks will be incremented if the motor rotates forwards one full revolution, and decremented if it rotates backwards one revolution. \end{DoxyCompactList}\item 
void \hyperlink{hall__sensor_8cpp_a333d70b162bb762c6233815470f40d97}{hall\+\_\+sensor\+\_\+setup} (short Phase\+A\+\_\+pin, short Phase\+B\+\_\+pin, short Phase\+C\+\_\+pin)
\begin{DoxyCompactList}\small\item\em Set up the wheel speed task to read high or low values from the three pins attached to the Hall sensor (one for each phase). \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int16\+\_\+t \hyperlink{hall__sensor_8cpp_a4f9943e6ab43adfb6975aeb73911151b}{ticks} = 0
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{hall\+\_\+sensor.\+cpp@{hall\+\_\+sensor.\+cpp}!hall\+\_\+sensor\+\_\+loop\+\_\+fn@{hall\+\_\+sensor\+\_\+loop\+\_\+fn}}
\index{hall\+\_\+sensor\+\_\+loop\+\_\+fn@{hall\+\_\+sensor\+\_\+loop\+\_\+fn}!hall\+\_\+sensor.\+cpp@{hall\+\_\+sensor.\+cpp}}
\subsubsection[{\texorpdfstring{hall\+\_\+sensor\+\_\+loop\+\_\+fn(short Phase\+B\+\_\+pin, short Phase\+C\+\_\+pin)}{hall_sensor_loop_fn(short PhaseB_pin, short PhaseC_pin)}}]{\setlength{\rightskip}{0pt plus 5cm}int16\+\_\+t hall\+\_\+sensor\+\_\+loop\+\_\+fn (
\begin{DoxyParamCaption}
\item[{short}]{Phase\+B\+\_\+pin, }
\item[{short}]{Phase\+C\+\_\+pin}
\end{DoxyParamCaption}
)}\hypertarget{hall__sensor_8cpp_ac5350eff4f7be4591be4804922422dea}{}\label{hall__sensor_8cpp_ac5350eff4f7be4591be4804922422dea}


This is the primary function controlling the wheel speed sensor. It reads a Hall sensor that is built into the Tekin R8 Motor. This is a three phased motor (PhaseA, PhaseB, PhaseC). Each phase is offset 120 degrees from each other. Ticks will be incremented if the motor rotates forwards one full revolution, and decremented if it rotates backwards one revolution. 

\begin{DoxyReturn}{Returns}
the current number of ticks that the sensor reads. 
\end{DoxyReturn}
\index{hall\+\_\+sensor.\+cpp@{hall\+\_\+sensor.\+cpp}!hall\+\_\+sensor\+\_\+setup@{hall\+\_\+sensor\+\_\+setup}}
\index{hall\+\_\+sensor\+\_\+setup@{hall\+\_\+sensor\+\_\+setup}!hall\+\_\+sensor.\+cpp@{hall\+\_\+sensor.\+cpp}}
\subsubsection[{\texorpdfstring{hall\+\_\+sensor\+\_\+setup(short Phase\+A\+\_\+pin, short Phase\+B\+\_\+pin, short Phase\+C\+\_\+pin)}{hall_sensor_setup(short PhaseA_pin, short PhaseB_pin, short PhaseC_pin)}}]{\setlength{\rightskip}{0pt plus 5cm}void hall\+\_\+sensor\+\_\+setup (
\begin{DoxyParamCaption}
\item[{short}]{Phase\+A\+\_\+pin, }
\item[{short}]{Phase\+B\+\_\+pin, }
\item[{short}]{Phase\+C\+\_\+pin}
\end{DoxyParamCaption}
)}\hypertarget{hall__sensor_8cpp_a333d70b162bb762c6233815470f40d97}{}\label{hall__sensor_8cpp_a333d70b162bb762c6233815470f40d97}


Set up the wheel speed task to read high or low values from the three pins attached to the Hall sensor (one for each phase). 


\begin{DoxyParams}{Parameters}
{\em Phase\+A\+\_\+pin} & An interrupt is triggered every time the Teensy read a leading edge for this phase. \\
\hline
{\em Phase\+B\+\_\+pin} & If this pin is high when the interrupt is triggered, the truck is going in reverse. \\
\hline
{\em Phase\+C\+\_\+pin} & If this pin is high when the interrupt is triggered, the truck is going forwards. \\
\hline
\end{DoxyParams}


\subsection{Variable Documentation}
\index{hall\+\_\+sensor.\+cpp@{hall\+\_\+sensor.\+cpp}!ticks@{ticks}}
\index{ticks@{ticks}!hall\+\_\+sensor.\+cpp@{hall\+\_\+sensor.\+cpp}}
\subsubsection[{\texorpdfstring{ticks}{ticks}}]{\setlength{\rightskip}{0pt plus 5cm}int16\+\_\+t ticks = 0}\hypertarget{hall__sensor_8cpp_a4f9943e6ab43adfb6975aeb73911151b}{}\label{hall__sensor_8cpp_a4f9943e6ab43adfb6975aeb73911151b}
