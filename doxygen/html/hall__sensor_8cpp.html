<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Daimtronics: daimtronics/teensy_chibios/src/main/hall_sensor.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Daimtronics
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1d5ce761e9c02e2b051f35ddd565cdaf.html">daimtronics</a></li><li class="navelem"><a class="el" href="dir_63787f74f87ec63e8232959c477334d7.html">teensy_chibios</a></li><li class="navelem"><a class="el" href="dir_d964fc0b6558df3e10cdb9d412d2a1ea.html">src</a></li><li class="navelem"><a class="el" href="dir_cffc4bb04983639ef0573c2c2293739c.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">hall_sensor.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="hall__sensor_8h_source.html">include/hall_sensor.h</a>&quot;</code><br />
<code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &lt;ChRt.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for hall_sensor.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="hall__sensor_8cpp__incl.png" border="0" usemap="#daimtronics_2teensy__chibios_2src_2main_2hall__sensor_8cpp" alt=""/></div>
<map name="daimtronics_2teensy__chibios_2src_2main_2hall__sensor_8cpp" id="daimtronics_2teensy__chibios_2src_2main_2hall__sensor_8cpp">
<area shape="rect" id="node2" href="hall__sensor_8h.html" title="include/hall_sensor.h" alt="" coords="5,109,149,136"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac5350eff4f7be4591be4804922422dea"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hall__sensor_8cpp.html#ac5350eff4f7be4591be4804922422dea">hall_sensor_loop_fn</a> (short PhaseB_pin, short PhaseC_pin)</td></tr>
<tr class="memdesc:ac5350eff4f7be4591be4804922422dea"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the primary function controlling the wheel speed sensor. It reads a Hall sensor that is built into the Tekin R8 Motor. This is a three phased motor (PhaseA, PhaseB, PhaseC). Each phase is offset 120 degrees from each other. Ticks will be incremented if the motor rotates forwards one full revolution, and decremented if it rotates backwards one revolution.  <a href="#ac5350eff4f7be4591be4804922422dea">More...</a><br /></td></tr>
<tr class="separator:ac5350eff4f7be4591be4804922422dea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a333d70b162bb762c6233815470f40d97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hall__sensor_8cpp.html#a333d70b162bb762c6233815470f40d97">hall_sensor_setup</a> (short PhaseA_pin, short PhaseB_pin, short PhaseC_pin)</td></tr>
<tr class="memdesc:a333d70b162bb762c6233815470f40d97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the wheel speed task to read high or low values from the three pins attached to the Hall sensor (one for each phase).  <a href="#a333d70b162bb762c6233815470f40d97">More...</a><br /></td></tr>
<tr class="separator:a333d70b162bb762c6233815470f40d97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4f9943e6ab43adfb6975aeb73911151b"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hall__sensor_8cpp.html#a4f9943e6ab43adfb6975aeb73911151b">ticks</a> = 0</td></tr>
<tr class="separator:a4f9943e6ab43adfb6975aeb73911151b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac5350eff4f7be4591be4804922422dea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t hall_sensor_loop_fn </td>
          <td>(</td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>PhaseB_pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>PhaseC_pin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is the primary function controlling the wheel speed sensor. It reads a Hall sensor that is built into the Tekin R8 Motor. This is a three phased motor (PhaseA, PhaseB, PhaseC). Each phase is offset 120 degrees from each other. Ticks will be incremented if the motor rotates forwards one full revolution, and decremented if it rotates backwards one revolution. </p>
<dl class="section return"><dt>Returns</dt><dd>the current number of ticks that the sensor reads. </dd></dl>

</div>
</div>
<a class="anchor" id="a333d70b162bb762c6233815470f40d97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hall_sensor_setup </td>
          <td>(</td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>PhaseA_pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>PhaseB_pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&#160;</td>
          <td class="paramname"><em>PhaseC_pin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up the wheel speed task to read high or low values from the three pins attached to the Hall sensor (one for each phase). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">PhaseA_pin</td><td>An interrupt is triggered every time the Teensy read a leading edge for this phase. </td></tr>
    <tr><td class="paramname">PhaseB_pin</td><td>If this pin is high when the interrupt is triggered, the truck is going in reverse. </td></tr>
    <tr><td class="paramname">PhaseC_pin</td><td>If this pin is high when the interrupt is triggered, the truck is going forwards. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a4f9943e6ab43adfb6975aeb73911151b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t ticks = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
